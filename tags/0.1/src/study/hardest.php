<?php//  ------------------------------------------------------------------------ ////                               phpWordTrain                                ////                           Copyright (c) 2005                              ////                     <http://phpwordtrain.berlios.de>                      ////  ------------------------------------------------------------------------ ////  This program is free software; you can redistribute it and/or modify     ////  it under the terms of the GNU General Public License as published by     ////  the Free Software Foundation; either version 2 of the License, or        ////  (at your option) any later version.                                      ////                                                                           ////  You may not change or alter any portion of this comment or credits       ////  of supporting developers from this source code or any supporting         ////  source code which is considered copyrighted (c) material of the          ////  original comment or credit authors.                                      ////                                                                           ////  This program is distributed in the hope that it will be useful,          ////  but WITHOUT ANY WARRANTY; without even the implied warranty of           ////  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            ////  GNU General Public License for more details.                             ////                                                                           ////  You should have received a copy of the GNU General Public License        ////  along with this program; if not, write to the Free Software              ////  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA ////  ------------------------------------------------------------------------ ////                                                                           ////  File:         /study/hardest.php                                         ////  Language:     PHP 4.3                                                    ////                                                                           ////  Description:  Builds lists of most missed words (so, hardest to learn)   ////                                                                           ////  Author:       Francisco Garcia Rodriguez <kalahan@users.berlios.de>      ////                                                                           ////  $Id$//  ------------------------------------------------------------------------ //include "../common.php";include "../lib/format.php";//// Set parameter values in next order: FORM, COOKIE, DEFAULT//if ( isset($_POST['misses']) )    $min_misses= $_POST['misses'];elseif ( isset($_COOKIE['misses']) )    $min_misses= $_COOKIE['misses'];else    $min_misses= 5;if ( isset($_POST['max']) )    $max_list= $_POST['max'];elseif ( isset($_COOKIE['max']) )    $max_list= $_COOKIE['max'];else    $max_list= 20; if ( isset($_POST['level']) )    $max_level= $_POST['level'];elseif ( isset($_COOKIE['level']) )    $max_level= $_COOKIE['level'];else    $max_level= 4;   //// Remember those parameters//setcookie("misses", $min_misses, time()+36000);setcookie("max", $max_list, time()+36000);setcookie("level", $max_level, time()+36000);//// Query according paremeters//$result= mysql_query("select word,translation,tip_word,misses from ".     "lang_german where level < $max_level and misses > $min_misses ".    "order by misses desc limit $max_list")        or Error("Error from the database: ".mysql_error());//// Build rows of table with results//$lines= array();for ($i=0; $i<mysql_num_rows($result); $i++){    $entry= mysql_fetch_array($result);    $color = GenreColorCode($entry['word']);    $word= '<a id="'.$color.'" href="../dictionary/display.php?word='        .$entry['word'].'">'.$entry['word']."</a>";    $Translation= $entry['translation'];    $Misses= $entry['misses'];    array_push($lines, array($Misses,$word,$Translation));}$smarty= Template();$smarty->assign("min_misses", $min_misses);     // Min. no. of misses$smarty->assign("max_list", $max_list);         // Length of builded list$smarty->assign("max_level", $max_level);       // Max. level of listed words$smarty->assign("section", "Study");            // Section$smarty->assign("linea", &$lines );             // Rows of table$smarty->display('study/hardest.tpl');?>