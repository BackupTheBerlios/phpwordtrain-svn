<?php//  ------------------------------------------------------------------------ ////                               phpWordTrain                                ////                           Copyright (c) 2005                              ////                     <http://phpwordtrain.berlios.de>                      ////  ------------------------------------------------------------------------ ////  This program is free software; you can redistribute it and/or modify     ////  it under the terms of the GNU General Public License as published by     ////  the Free Software Foundation; either version 2 of the License, or        ////  (at your option) any later version.                                      ////                                                                           ////  You may not change or alter any portion of this comment or credits       ////  of supporting developers from this source code or any supporting         ////  source code which is considered copyrighted (c) material of the          ////  original comment or credit authors.                                      ////                                                                           ////  This program is distributed in the hope that it will be useful,          ////  but WITHOUT ANY WARRANTY; without even the implied warranty of           ////  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            ////  GNU General Public License for more details.                             ////                                                                           ////  You should have received a copy of the GNU General Public License        ////  along with this program; if not, write to the Free Software              ////  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA ////  ------------------------------------------------------------------------ ////                                                                           ////  File:         /dictionary/search.php                                     ////  Language:     PHP 4.3                                                    ////                                                                           ////  Description:  Handle searches results of vocabulary words                ////                                                                           ////  Author:       Francisco Garcia Rodriguez <kalahan@users.berlios.de>      ////                                                                           ////  $Id$//  ------------------------------------------------------------------------ //include "../common.php";include "../lib/format.php";include "../lib/utils.php";// What are we looking for?if (isset($_GET['word']))           // We are looking a word of foreign language{    $word = $_GET['word'];    $way = "word";    $sql= "select * from lang_german where word regexp '$word' order by word";}elseif (isset($_GET['trans']))      // We are looking for a translation{    $trans = $_GET['trans'];    $way = "translation";    $sql= "select * from lang_german where translation regexp '$trans'".          "order by translation";}else Error("You can't access this page without providing search parameters");$result = mysql_query($sql) or           Error("Error from the database".mysql_error());// Take action based on number of resultsswitch ( mysql_num_rows($result) ){    // One word goes straight to foreign display page    case 1:         $entry= mysql_fetch_array($result);        header("Location: display.php?word=".$entry['word']);         break;            // One word goes straight to foreign display page    case 0:        Msg('Your search returned no results');        break;    // More than one result prints table with matches    default:        $line= array();            // Build list of entries        for ($i=0; $i<mysql_num_rows($result); $i++)        {            $entry= mysql_fetch_array($result);            $color = GenreColorCode($entry['word']);            $Word= '<a id="'.$color.'" href="display.php?word='                .htmlspecialchars($entry['word']).'">'.$entry['word']."</a>";            $Translation= $entry['translation'];            $Type= $entry['type'];            $Level= $entry['level'];            if ($way == "word")                array_push($line, array($Word, $Translation, $Type, $Level));            else                array_push($line, array($Translation, $Word, $Type, $Level));        }                $smarty= Template();        $smarty->assign("section", "Dictionary");        $smarty->assign("line", &$line );        $smarty->assign("way", &$way );        $smarty->display('dictionary/search.tpl');}?>